# üåê DNS Configuration Guide for All4You Auctions

## üìã Overview
This guide shows how to configure DNS for your auction platform with:
- **Frontend**: `www.all4youauctions.co.za` (Custom Domain on Render)
- **Backend**: `all4you-backend.onrender.com` (Default Render URL)

---

## üéØ Current Domain Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DNS Configuration                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  üåç www.all4youauctions.co.za                              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ CNAME ‚Üí all4you-frontend.onrender.com                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Points to: Frontend Service (Next.js)                 ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üîó all4you-backend.onrender.com                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Default Render URL                                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Points to: Backend Service (Node.js/Express)          ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß DNS Records Configuration

### 1. Frontend Domain: `www.all4youauctions.co.za`

**Add these DNS records in your domain registrar:**

| Type  | Name | Value                          | TTL  |
|-------|------|--------------------------------|------|
| CNAME | www  | all4you-frontend.onrender.com  | 300  |

**Alternative A Record (if CNAME not supported):**
| Type | Name | Value             | TTL |
|------|------|-------------------|-----|
| A    | www  | [Render IP]       | 300 |

> **Note**: Render will provide the specific IP address in your service dashboard.

### 2. Root Domain: `all4youauctions.co.za` (Optional)

**If you want to redirect root domain to www:**

| Type  | Name | Value                         | TTL  |
|-------|------|-------------------------------|------|
| CNAME | @    | all4you-frontend.onrender.com | 300  |

**Or use URL forwarding:**
- Redirect `all4youauctions.co.za` ‚Üí `www.all4youauctions.co.za`

---

## üõ†Ô∏è Render Configuration Steps

### Step 1: Frontend Service Custom Domain

1. **Go to Render Dashboard**: https://dashboard.render.com
2. **Select your frontend service**: `all4you-frontend`
3. **Go to Settings** ‚Üí **Custom Domains**
4. **Add Custom Domain**: `www.all4youauctions.co.za`
5. **Render will provide**: DNS instructions specific to your service

### Step 2: Backend Service (No Custom Domain Needed)

- **URL**: `https://all4you-backend.onrender.com`
- **Status**: Uses default Render subdomain
- **Configuration**: No DNS changes required

---

## üìä Environment Variables Configuration

### Frontend Service Environment Variables:
```bash
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://all4you-backend.onrender.com
NEXT_PUBLIC_BASE_URL=https://www.all4youauctions.co.za
```

### Backend Service Environment Variables:
```bash
NODE_ENV=production
FRONTEND_URL=https://www.all4youauctions.co.za
JWT_SECRET=<auto-generated>
# ... other backend variables
```

---

## üîç DNS Verification Commands

### Check DNS Propagation:
```bash
# Check CNAME record
nslookup www.all4youauctions.co.za

# Check if pointing to Render
dig www.all4youauctions.co.za CNAME

# Test HTTP response
curl -I https://www.all4youauctions.co.za
```

### Expected Results:
```bash
# CNAME should point to:
www.all4youauctions.co.za CNAME all4you-frontend.onrender.com

# HTTP response should show:
HTTP/2 200 
server: Render
```

---

## üåç Domain Registrar Specific Instructions

### **Cloudflare** (if using Cloudflare DNS):
```
Type: CNAME
Name: www
Target: all4you-frontend.onrender.com
Proxy status: DNS only (gray cloud)
TTL: Auto
```

### **GoDaddy**:
```
Type: CNAME
Host: www
Points to: all4you-frontend.onrender.com
TTL: 600 seconds
```

### **Namecheap**:
```
Type: CNAME Record
Host: www
Value: all4you-frontend.onrender.com
TTL: Automatic
```

---

## üîí SSL/TLS Configuration

### Automatic SSL on Render:
- ‚úÖ **Frontend**: Render automatically provides SSL for `www.all4youauctions.co.za`
- ‚úÖ **Backend**: Default SSL on `all4you-backend.onrender.com`
- ‚úÖ **Certificate**: Let's Encrypt (auto-renewal)

### SSL Verification:
```bash
# Check SSL certificate
openssl s_client -connect www.all4youauctions.co.za:443 -servername www.all4youauctions.co.za
```

---

## üöÄ Testing After DNS Configuration

### 1. Frontend Tests:
```bash
# Main site
https://www.all4youauctions.co.za

# Admin panel
https://www.all4youauctions.co.za/admin

# API test page
https://www.all4youauctions.co.za/test-api
```

### 2. Backend API Tests:
```bash
# Health check
https://all4you-backend.onrender.com/api/ping

# CORS test from frontend
curl -H "Origin: https://www.all4youauctions.co.za" \
     https://all4you-backend.onrender.com/api/ping
```

---

## ‚è±Ô∏è DNS Propagation Timeline

| Time Frame | Status |
|------------|--------|
| 0-5 mins   | Local DNS cache |
| 5-30 mins  | ISP DNS servers |
| 30-2 hours | Regional propagation |
| 2-24 hours | Global propagation |

> **Tip**: Use incognito/private browsing to avoid browser cache during testing.

---

## üîß Troubleshooting DNS Issues

### Common Problems:

1. **CNAME not resolving**:
   ```bash
   # Check if DNS record exists
   dig www.all4youauctions.co.za CNAME
   ```

2. **SSL certificate issues**:
   ```bash
   # Wait 10-15 minutes after DNS propagation
   # Render auto-generates SSL certificates
   ```

3. **504 Gateway errors**:
   ```bash
   # Check if Render services are running
   # Verify environment variables are set
   ```

### DNS Debugging Tools:
- **whatsmydns.net**: Global DNS propagation checker
- **dig command**: DNS record lookup
- **nslookup**: DNS resolution testing

---

## üìã Final Checklist

### Before Go-Live:
- [ ] DNS records configured at registrar
- [ ] Custom domain added in Render dashboard
- [ ] SSL certificate active (green lock icon)
- [ ] Environment variables set correctly
- [ ] Frontend loads at `www.all4youauctions.co.za`
- [ ] API connection test passes
- [ ] Admin panel accessible
- [ ] All auction features working

### After Go-Live:
- [ ] Monitor DNS propagation
- [ ] Test from different locations/devices
- [ ] Check SSL certificate validity
- [ ] Verify all API endpoints working
- [ ] Test real-time bidding functionality

---

## üéØ Summary

**Your final setup will be:**
- **Users visit**: `https://www.all4youauctions.co.za`
- **Frontend served by**: Render (with custom domain)
- **API calls go to**: `https://all4you-backend.onrender.com`
- **All services**: Hosted on Render platform

This configuration provides the best of both worlds:
- ‚úÖ Professional branded domain for users
- ‚úÖ Reliable Render infrastructure
- ‚úÖ No Vercel caching issues
- ‚úÖ Unified platform management
